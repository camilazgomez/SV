Create Database InscripcionesBrDb
GO

USE [InscripcionesBrDb]
GO


CREATE TABLE [dbo].[Persona] (
    [Id]              INT           IDENTITY (1, 1) NOT NULL,
    [Rut]             NVARCHAR (10) NULL,
    [Nombre]          NVARCHAR (50) NOT NULL,
    [FechaNacimiento] DATE          NOT NULL,
    [Email]           NCHAR (50)    NOT NULL,
    [Dirección]       NCHAR (50)    NULL,
    CONSTRAINT [PK_Persona] PRIMARY KEY CLUSTERED ([Id] ASC)
);
GO


CREATE TABLE [dbo].[RealStateForm] (
    [attentionNumber]   INT           IDENTITY (1, 1) NOT NULL,
    [natureOfTheDeed]   VARCHAR (MAX) NOT NULL,
    [commune]           VARCHAR (MAX) NOT NULL,
    [block]             VARCHAR (MAX) NOT NULL,
    [property]          VARCHAR (MAX) NOT NULL,
    [sheets]            INT           NOT NULL,
    [inscriptionDate]   DATE          NOT NULL,
    [inscriptionNumber] INT           NOT NULL,
    PRIMARY KEY CLUSTERED ([attentionNumber] ASC)
);
GO



CREATE TABLE [dbo].[MultiOwner] (
    [Id]                  INT           IDENTITY (1, 1) NOT NULL,
    [rut]                 NCHAR (10)    NULL,
    [ownershipPercentage] FLOAT (53)    NULL,
    [commune]             VARCHAR (MAX) NOT NULL,
    [block]               VARCHAR (MAX) NOT NULL,
    [property]            VARCHAR (MAX) NOT NULL,
    [sheets]              INT           NOT NULL,
    [inscriptionDate]     DATE          NOT NULL,
    [inscriptionNumber]   INT           NOT NULL,
    [formsId]             INT           NULL,
    [validityYearBegin]             INT           NULL,
    [validityYearFinish]             INT           NULL,
    PRIMARY KEY CLUSTERED ([Id] ASC),
    CONSTRAINT [FK_MultiOwner_(ToTableColumn)] FOREIGN KEY ([formsId]) REFERENCES [dbo].[RealStateForm] ([attentionNumber])
);
GO

CREATE TABLE [dbo].[People] (
    [Id]                  INT        IDENTITY (1, 1) NOT NULL,
    [rut]                 NCHAR (10) NULL,
    [ownershipPercentage] FLOAT (53) NULL,
    [uncreditedOwnership] BIT        NULL,
    [formsId]             INT        NULL,
    [seller]              BIT        NULL,
    [heir]                BIT        NULL,
    PRIMARY KEY CLUSTERED ([Id] ASC),
    CONSTRAINT [FK_People_(ToTableColumn)] FOREIGN KEY ([formsId]) REFERENCES [dbo].[RealStateForm] ([attentionNumber])
);
GO



USE [InscripcionesBrDb]
GO
SET IDENTITY_INSERT [dbo].[Persona] ON 
GO
INSERT [dbo].[Persona] ([Id], [Rut], [Nombre], [FechaNacimiento], [Email], [Dirección]) VALUES (1, N'10915348-6', N'Mario Abellan', CAST(N'1982-01-15' AS Date), N'marioabellan@gmail.com', N'Galvarino Gallardo 1534')
GO
SET IDENTITY_INSERT [dbo].[Persona] OFF
GO

USE [InscripcionesBrDb]
GO
SET IDENTITY_INSERT [dbo].[RealStateForm] ON 
GO
INSERT [dbo].[RealStateForm] (
    [attentionNumber],
    [natureOfTheDeed],
    [commune],
    [block],
    [property],
    [sheets],
    [inscriptionDate],
    [inscriptionNumber]
)
VALUES 
(1, N'Compraventa', N'Las Condes', N'200', N'200', 1, CAST(N'2022-11-24' As Date), 1)
GO
SET IDENTITY_INSERT [dbo].[RealStateForm] OFF
GO

USE [InscripcionesBrDb]
GO
SET IDENTITY_INSERT [dbo].[MultiOwner] ON 
GO
INSERT [dbo].[MultiOwner] (
    [Id], 
    [rut],
    [ownershipPercentage],
    [commune],
    [block], 
    [property], 
    [sheets],
    [inscriptionDate],
    [inscriptionNumber], 
    [formsId],
    [validityYearBegin],
    [validityYearFinish]
) 
VALUES 
(1, N'21853297-1', 20, N'Las Condes', N'18829', N'129', 1, CAST(N'2014-11-24' As Date), 23, 1, 2014, 2021),
(2, N'25797139-5', 90.4, N'Pudahuel', N'30105', N'57', 2, CAST(N'2013-05-26' As Date), 2, 1,2013 , NULL),
(3, N'20476823-2', 46.4, N'Las Condes', N'18829', N'129', 3, CAST(N'2021-01-10' As Date), 3, 1, 2021, NULL),
(4, N'15992415-1', 57, N'Providencia', N'44136', N'79', 4, CAST(N'2019-10-28' As Date), 4, 1, 2019, 2020),
(5, N'18507947-9', 60, N'El Bosque', N'20011', N'202', 5, CAST(N'2018-08-01' As Date), 5, 1,2018 , NULL),
(6, N'12841241-1', 62, N'La Cisterna', N'25926', N'125', 6, CAST(N'2019-04-19' As Date), 6, 1,2019 , NULL),
(7, N'10419143-6', 62, N'Huechuraba', N'39058', N'179', 7, CAST(N'2013-07-07' As Date), 7, 1,2013 ,NULL),
(8, N'13008246-6', 62.4, N'Independencia', N'54765', N'225', 8, CAST(N'2020-12-24' As Date), 8, 1,2020,NULL ),
(9, N'19995273-8', 59, N'Huechuraba', N'15333', N'47', 9, CAST(N'2011-11-07' As Date), 7 ,1, 2022, NULL),
(10, N'20909215-0', 50.4, N'Providencia', N'58060', N'163', 10, CAST(N'2018-09-08' As Date), 8 , 1,2018 ,NULL),
(11, N'10915348-6', 90.4, N'Las Condes', N'200', N'200', 11,CAST(N'1982-01-15' AS Date), 1, 1,1982 , NULL),
(12, N'20457896-6', 50.4, N'Vitacura', N'200', N'200', 12,CAST(N'1982-01-15' AS Date), 2, 1, 1982, NULL),
(13, N'24531540-6', 59, N'Lo Espejo',    N'1744', N'154', 13, CAST(N'2022-04-28' As Date), 3, 1,2022 , NULL),
(14, N'13126204-8', 50, N'Vitacura', N'1485', N'598', 14, CAST(N'2011-12-15' As Date), 13, 1, 2011, NULL),
(15, N'20623952-2', 46, N'Cerrillos', N'1691', N'851', 15, CAST(N'2021-05-13' As Date), 36, 1,2021 , NULL),
(16, N'12893779-7', 32, N'La Reina', N'1326', N'194', 16, CAST(N'2015-10-22' As Date), 8, 1, 2015, NULL),
(17, N'13280657-8', 40, N'La Reina', N'1326', N'194', 17, CAST(N'2015-01-19' As Date), 4, 1,2015 , NULL)
GO
SET IDENTITY_INSERT [dbo].[MultiOwner] OFF
GO


CREATE TABLE Communes (
  [Id]              INT           IDENTITY (1, 1) NOT NULL PRIMARY KEY,
  Name VARCHAR(50) NOT NULL,
);

INSERT INTO Communes (Name) 
VALUES 
('Algarrobo'),
('Alto Biobío'),
('Alto del Carmen'),
('Ancud'),
('Andacollo'),
('Angol'),
('Antártica'),
('Antofagasta'),
('Antuco'),
('Arauco'),
('Arica'),
('Arica y Parinacota'),
('Aysén'),
('Buin'),
('Bulnes'),
('Cabildo'),
('Cabo de Hornos'),
('Cabrero'),
('Calama'),
('Caldera'),
('Calera de Tango'),
('Calle Larga'),
('Canela'),
('Carahue'),
('Cartagena'),
('Casablanca'),
('Castro'),
('Catemu'),
('Cauquenes'),
('Cañete'),
('Cerro Navia'),
('Chaitén'),
('Chañaral'),
('Chépica'),
('Chillán'),
('Chillán Viejo'),
('Chimbarongo'),
('Cholchol'),
('Cisnes'),
('Cobquecura'),
('Cochamó'),
('Cochrane'),
('Codegua'),
('Coelemu'),
('Coinco'),
('Colbún'),
('Colchane'),
('Colina'),
('Collipulli'),
('Coltauco'),
('Combarbalá'),
('Concepción'),
('Concón'),
('Constitución'),
('Contulmo'),
('Copiapó'),
('Coquimbo'),
('Coronel'),
('Corral'),
('Coyhaique'),
('Cunco'),
('Curacautín'),
('Curacaví'),
('Curaco de Vélez'),
('Curanilahue'),
('Curarrehue'),
('Curepto'),
('Curicó'),
('Dalcahue'),
('Diego de Almagro'),
('Doñihue'),
('El Bosque'),
('El Carmen'),
('El Monte'),
('El Quisco'),
('El Tabo'),
('Empedrado'),
('Ercilla'),
('Estación Central'),
('Florida'),
('Freire'),
('Freirina'),
('Fresia'),
('Frutillar'),
('Futaleufú'),
('Futrono'),
('Galvarino'),
('General Lagos'),
('Gorbea'),
('Graneros'),
('Guaitecas'),
('Hijuelas'),
('Hualaihué'),
('Hualañé'),
('Hualpén'),
('Hualqui'),
('Huara'),
('Huasco'),
('Huechuraba'),
('Illapel'),
('Independencia'),
('Iquique'),
('Isla de Maipo'),
('Isla de Pascua'),
('Juan Fernández'),
('La Calera'),
('La Cisterna'),
('La Cruz'),
('La Estrella'),
('La Florida'),
('La Granja'),
('La Higuera'),
('La Ligua'),
('La Pintana'),
('La Reina'),
('La Serena'),
('La Unión'),
('Lago Ranco'),
('Lago Verde'),
('Laguna Blanca'),
('Laja'),
('Lampa'),
('Lampazos'),
('Las Cabras'),
('Las Condes'),
('Lautaro'),
('Lebu'),
('Licantén'),
('Limache'),
('Linares'),
('Litueche'),
('Llanquihue'),
('Lo Barnechea'),
('Lo Espejo'),
('Lo Prado'),
('Lolol'),
('Loncoche'),
('Longaví'),
('Lonquimay'),
('Los Alamos'),
('Los Andes'),
('Los Ángeles'),
('Los Lagos'),
('Los Muermos'),
('Los Sauces'),
('Los Vilos'),
('Lota'),
('Lumaco'),
('Machalí'),
('Macul'),
('Máfil'),
('Maipú'),
('Malloa'),
('Marchihue'),
('María Elena'),
('María Pinto'),
('Mariquina'),
('Maule'),
('Mejillones'),
('Melipeuco'),
('Melipilla'),
('Molina'),
('Monte Patria'),
('Mostazal'),
('Mulchén'),
('Nacimiento'),
('Nancagua'),
('Natales'),
('Navidad'),
('Negrete'),
('Ninhue'),
('Nogales'),
('Nueva Imperial'),
('Ñiquén'),
('Ñuñoa'),
('OHiggins'),
('Olivar'),
('Olmué'),
('Osorno'),
('Ovalle'),
('Padre Hurtado'),
('Padre Las Casas'),
('Paihuano'),
('Palena'),
('Palmilla'),
('Panguipulli'),
('Panquehue'),
('Papudo'),
('Paredones'),
('Parral'),
('Pedro Aguirre Cerda'),
('Pelarco'),
('Pelluhue'),
('Pemuco'),
('Pencahue'),
('Penco'),
('Peñaflor'),
('Peñalolén'),
('Peralillo'),
('Perquenco'),
('Petorca'),
('Peumo'),
('Pica'),
('Pichidegua'),
('Pichilemu'),
('Pinto'),
('Pirque'),
('Pitrufquén'),
('Placilla'),
('Portezuelo'),
('Porvenir'),
('Pozo Almonte'),
('Primavera'),
('Providencia'),
('Puchuncaví'),
('Pucón'),
('Pudahuel'),
('Puente Alto'),
('Puerto Montt'),
('Puerto Octay'),
('Puerto Varas'),
('Pumanque'),
('Punitaqui'),
('Punta Arenas'),
('Puqueldón'),
('Purén'),
('Purranque'),
('Puyehue'),
('Queilén'),
('Quellón'),
('Quemchi'),
('Quilaco'),
('Quilicura'),
('Quilleco'),
('Quillón'),
('Quillota'),
('Quinta de Tilcoco'),
('Quinta Normal'),
('Quintero'),
('Quirihue'),
('Rancagua'),
('Ránquil'),
('Rauco'),
('Recoleta'),
('Renaico'),
('Renca'),
('Rengo'),
('Requínoa'),
('Retiro'),
('Rinconada'),
('Río Bueno'),
('Río Claro'),
('Río Hurtado'),
('Río Ibáñez'),
('Río Negro'),
('Río Verde'),
('Romeral'),
('Saavedra'),
('Sagrada Familia'),
('Salamanca'),
('San Antonio'),
('San Bernardo'),
('San Carlos'),
('San Clemente'),
('San Esteban'),
('San Fabián'),
('San Felipe'),
('San Fernando'),
('San Gregorio'),
('San Ignacio'),
('San Javier'),
('San Joaquín'),
('San José de Maipo'),
('San Juan de la Costa'),
('San Miguel'),
('San Nicolás'),
('San Pablo'),
('San Pedro'),
('San Pedro de Atacama'),
('San Pedro de la Paz'),
('San Rafael'),
('San Ramón'),
('San Rosendo'),
('San Vicente de Tagua Tagua'),
('Santa Bárbara'),
('Santa Cruz'),
('Santa Juana'),
('Santa María'),
('Santiago'),
('Santo Domingo'),
('Sierra Gorda'),
('Talagante'),
('Talca'),
('Talcahuano'),
('Taltal'),
('Temuco'),
('Teno'),
('Teodoro Schmidt'),
('Tierra Amarilla'),
('Til Til'),
('Timaukel'),
('Tirúa'),
('Tocopilla'),
('Toltén'),
('Tomé'),
('Torres del Paine'),
('Tortel'),
('Traiguén'),
('Treguaco'),
('Tucapel'),
('Valdivia'),
('Vallenar'),
('Valparaíso'),
('Vichuquén'),
('Victoria'),
('Vicuña'),
('Vilcún'),
('Villa Alegre'),
('Villa Alemana'),
('Villarrica'),
('Viña del Mar'),
('Vitacura'),
('Yerbas Buenas'),
('Yumbel'),
('Yungay');